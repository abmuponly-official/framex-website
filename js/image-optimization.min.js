!function(){"use strict";const t={rootMargin:"50px 0px",threshold:.01,fadeInDuration:300,placeholderClass:"img-placeholder",loadedClass:"img-loaded",errorClass:"img-error",webpSupport:!1},e=e=>{const r=e.getAttribute("data-src"),a=e.getAttribute("data-srcset"),s=e.getAttribute("data-sizes");if(!r&&!a)return;const o=new Image;o.onload=()=>{r&&(e.src=r),a&&(e.srcset=a),s&&(e.sizes=s),e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-sizes"),requestAnimationFrame(()=>{e.classList.add(t.loadedClass);const r=e.previousElementSibling;r&&r.classList.contains(t.placeholderClass)&&setTimeout(()=>{r.remove()},t.fadeInDuration)}),e.dispatchEvent(new CustomEvent("lazyloaded",{detail:{src:r||a}}))},o.onerror=()=>{e.classList.add(t.errorClass);const s=e.getAttribute("data-fallback");s&&s!==r&&(e.src=s),e.dispatchEvent(new CustomEvent("lazyerror",{detail:{src:r||a}}))},a&&(o.srcset=a),o.src=r||e.getAttribute("data-src")};let r;const a=()=>{document.querySelectorAll("img[data-src], img[data-srcset]").forEach(e=>{"loading"in HTMLImageElement.prototype&&(e.loading="lazy"),e.decoding="async";if(!e.parentElement.querySelector("."+t.placeholderClass)){const r=(e=>{const r=document.createElement("div");r.className=t.placeholderClass;const a=e.getAttribute("width"),s=e.getAttribute("height");r.style.paddingBottom=a&&s?s/a*100+"%":"56.25%";const o=e.getAttribute("data-placeholder");return o?(r.style.backgroundImage=`url(${o})`,r.style.backgroundSize="cover",r.style.filter="blur(5px)"):r.style.backgroundColor="#f0f0f0",r})(e);e.parentElement.insertBefore(r,e)}r&&r.observe(e)})},s=()=>{document.querySelectorAll("img[data-src], img[data-srcset]").forEach(e)};window.ImageOptimization={init:async function(){if(await new Promise(e=>{const r=new Image;r.onload=r.onerror=()=>{t.webpSupport=2===r.height,e(t.webpSupport)},r.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}),(()=>{if(!t.webpSupport)return;document.querySelectorAll("img[data-src], img[src]").forEach(t=>{const e=t.getAttribute("data-src")||t.src;if(e.includes(".webp")||e.startsWith("http://")||e.startsWith("https://"))return;const r=e.replace(/\.(jpg|jpeg|png)$/i,".webp");t.getAttribute("data-src")?(t.setAttribute("data-src",r),t.setAttribute("data-fallback",e)):t.src=r})})(),"IntersectionObserver"in window?r=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const a=t.target;e(a),r.unobserve(a)}})},{rootMargin:t.rootMargin,threshold:t.threshold}):s(),document.querySelectorAll("img[data-critical]").forEach(t=>{const a=document.createElement("link");a.rel="preload",a.as="image",a.href=t.getAttribute("data-src")||t.src;const s=t.getAttribute("data-srcset");if(s){a.imageSrcset=s;const e=t.getAttribute("data-sizes");e&&(a.imageSizes=e)}document.head.appendChild(a),e(t),r&&r.unobserve(t)}),document.querySelectorAll("img[data-progressive]").forEach(t=>{const e=t.getAttribute("data-progressive"),r=t.getAttribute("data-src");if(e&&r){t.src=e,t.style.filter="blur(5px)",t.style.transition="filter 0.3s";const a=new Image;a.onload=()=>{t.src=r,t.style.filter="none",t.removeAttribute("data-progressive")},a.src=r}}),a(),window.MutationObserver){new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.length&&t.addedNodes.forEach(t=>{"IMG"===t.tagName&&(t.getAttribute("data-src")||t.getAttribute("data-srcset"))&&a()})})}).observe(document.body,{childList:!0,subtree:!0})}},load:function(t){"string"==typeof t&&(t=document.querySelector(t)),t&&e(t)},loadAll:function(t){"string"==typeof t&&(t=document.querySelector(t));(t?t.querySelectorAll("img[data-src], img[data-srcset]"):[]).forEach(e)},updateConfig:function(e){Object.assign(t,e)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.ImageOptimization.init()}):window.ImageOptimization.init()}();